<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="i18nlayer">

<body>

   <div metal:fill-slot="main" 
        tal:define="rejection here/rejectAnonymous;
                    errors python:request.get('errors', {});
                    Iterator python:modules['Products.CMFPlone'].IndexIterator;
                    tabindex python:Iterator();
		    existing_languages python:here.retrieveFilteredLanguages().keys()">

        <h1 i18n:translate="heading_languages_sheet">
        Languages Sheet of this 
	       <span i18n:name="itemtype">
                  <span i18n:domain="plone" i18n:translate=""
                        tal:content="python:here.getTypeInfo().Title()" 
                        tal:omit-tag="">Item type</span>
            </span>
        </h1>

        <p i18n:translate="description_languages_sheet">
        Add new languages for this I18NLayer here.
        </p>  

        <form name="folderContentsForm"
	      tal:condition="python:len(existing_languages)"
	      method="post"
              action="folder_object"
              class="group"
              tal:attributes="action here/absolute_url"
              tal:define="global batch python:[];
			  folder_contents python:1;
                          standalone python:0;">
	    <span class="legend" i18n:translate="legend_existing_languages">existing languages</span>
    
            <tal:block tal:repeat="lang existing_languages">
		<tal:block tal:define="dummy python:batch.append(getattr(here,lang))" />
            </tal:block>

            <div class="row"><div i18n:translate="label_list" class="label">List</div>
              <metal metal:use-macro="here/folder_contents/macros/folder_listing" />
	    </div>

	    <div class="row"><div class="label">&nbsp;</div>
              <input class="context" type="submit" name="deleteLanguageObject:method" i18n:domain="plone" i18n:attributes="value" value="Delete" />
            </div>

	</form>
    

        <form class="group"
              name="edit_form"
              action="createLanguageObject"
              tal:attributes="action string:${here/absolute_url}/createLanguageObject"
              method="get">

            <span class="legend" i18n:translate="legend_create_new_language">create new language</span>

            <div class="row">
                <div class="label">
                
                    <span i18n:translate="label_language">Language</span>
                
                </div>
                
                <div class="field">
    
		    <select name="id"
		            tabindex=""
			    tal:attributes="tabindex tabindex/next;"
			    tal:define="available_languages python:list(here.availableLanguages()); sorted python:available_languages.sort( lambda x,y: cmp(x[1], y[1]) )">
			    
			    <option value="" i18n:domain="plone" i18n:translate="label_choose_language">Choose Language</option>
			    <tal:block tal:repeat="language available_languages">
			      <option tal:condition="python:test(language[0] not in existing_languages, 1,0)" tal:attributes="value python:language[0]"
			              tal:content="structure python:language[1]">Language</option>
			    </tal:block>
		    </select>		
				   
		    <input type="hidden" name="type_name" value="" tal:attributes="value here/ContainmentContentType" />

                </div>
    
            </div>
        
            <div class="row">
                <div class="label">&nbsp;</div>
                    <input class="context" 
                           tabindex=""
                           type="submit"
                           name="Change" 
                           value="Create"
                           i18n:attributes="value"
                           tal:attributes="tabindex tabindex/next;" /> 
            </div>
            
        </form>
	    
    </div>

</body>
</html>
